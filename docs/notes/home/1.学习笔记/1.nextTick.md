---
title: nextTickæ–¹æ³•
createTime: 2025/08/08 21:29:19
permalink: /home/p2dbvck9/
---

```js
// æŽ¥æ”¶èŠå¤©æ¶ˆæ¯ï¼ˆåŒ…æ‹¬è‡ªå·±å‘å‡ºåŽè¿”å›žçš„æ¶ˆæ¯ï¼‰
  socket.on('receiveChatMsg', async (event) => {
    list.value.push(event)
    await nextTick() // ç®€å•ç†è§£ä¸ºDOMæ›´æ–°åŽè§¦å‘ï¼Œæ‰§è¡Œå®ŒnextTick()åŽä¹Ÿä»£è¡¨DOMæ›´æ–°å®Œæˆäº†
    // é€šè¿‡ nextTick æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿åœ¨ DOM æ›´æ–°å®ŒæˆåŽæ‰§è¡ŒæŸäº›æ“ä½œã€‚
    window.scrollTo(0, document.body.scrollHeight)
  })
})
```


åœ¨åšå³æ—¶é€šè®¯é¡¹ç›®æ—¶ï¼Œæœ‰å‘é€æ¶ˆæ¯åŽè§£å†³çª—å£è‡ªåŠ¨ä¸‹æ»‘çš„éœ€æ±‚

åœ¨ Vue.js ä¸­ï¼Œæœ‰ä¸€ä¸ªç‰¹æ®Šçš„æ–¹æ³• nextTickï¼Œå®ƒåœ¨ DOM æ›´æ–°åŽæ‰§è¡Œä¸€æ®µä»£ç ï¼Œèµ·åˆ°ç­‰å¾… DOM ç»˜åˆ¶å®Œæˆçš„ä½œç”¨ã€‚æœ¬æ–‡ä¼šè¯¦ç»†ä»‹ç» nextTick çš„åŽŸç†å’Œä½¿ç”¨æ–¹æ³•ï¼Œå¹¶å®žçŽ°ä¸€ä¸ªç®€æ˜“ç‰ˆçš„ nextTickï¼ŒåŠ æ·±å¯¹å®ƒçš„ç†è§£ã€‚

ä¸€. ä»€ä¹ˆæ˜¯ nextTick
$nextTick çš„å®šä¹‰ï¼šð‘›ð‘’ð‘¥ð‘¡ð‘‡ð‘–ð‘ð‘˜æ–¹æ³•å°†å›žè°ƒå‡½æ•°å»¶è¿Ÿåˆ°ä¸‹æ¬¡ð·ð‘‚ð‘€æ›´æ–°å¾ªçŽ¯ç»“æŸä¹‹åŽæ‰§è¡Œã€‚åœ¨ð‘‰ð‘¢ð‘’.ð‘—ð‘ ä¸­ï¼Œç”±äºŽð·ð‘‚ð‘€çš„æ›´æ–°æ˜¯å¼‚æ­¥çš„ï¼Œæ‰€ä»¥å½“æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œð·ð‘‚ð‘€ä¸ä¼šç«‹å³æ›´æ–°ï¼Œè€Œæ˜¯åœ¨ä¸‹ä¸€ä¸ªâ€œð‘¡ð‘–ð‘ð‘˜â€ï¼ˆå³ð‘‰ð‘¢ð‘’çš„ð·ð‘‚ð‘€æ›´æ–°å‘¨æœŸï¼‰ä¸­ç»Ÿä¸€è¿›è¡Œæ›´æ–°ã€‚å› æ­¤ï¼Œå¦‚æžœä½ éœ€è¦åœ¨æ•°æ®å˜åŒ–åŽç«‹å³è®¿é—®æ›´æ–°åŽçš„ð·ð‘‚ð‘€ï¼Œå°±éœ€è¦ä½¿ç”¨nextTick æ–¹æ³•ã€‚

ç®€å•çš„è¯´ï¼ŒnextTick æ–¹æ³•æ˜¯åœ¨ Vue.js ä¸­å¸¸è§çš„ä¸€ç§å¼‚æ­¥æ›´æ–° DOM çš„æœºåˆ¶ã€‚å®ƒçš„åŽŸç†æ˜¯åˆ©ç”¨ Java çš„äº‹ä»¶å¾ªçŽ¯æœºåˆ¶ä»¥åŠæµè§ˆå™¨çš„æ¸²æŸ“æµç¨‹æ¥å®žçŽ°å»¶è¿Ÿæ‰§è¡Œ DOM æ›´æ–°æ“ä½œã€‚

å®ƒçš„å‡ºçŽ°ä¸»è¦æ˜¯ä¸ºäº†è§£å†³ Vue çš„å¼‚æ­¥æ›´æ–°å¯¼è‡´çš„ DOM æ›´æ–°åŽçš„æ“ä½œé—®é¢˜ã€‚

åœ¨ Vue ä¸­ï¼Œæ•°æ®çš„å˜åŒ–ä¼šè§¦å‘é‡æ–°æ¸²æŸ“ DOMï¼Œä½†å®žé™…ä¸Šï¼ŒVue çš„æ•°æ®æ›´æ–°æ˜¯å¼‚æ­¥çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æˆ‘ä»¬ä¿®æ”¹äº† Vue å®žä¾‹çš„æ•°æ®åŽï¼Œå¹¶ä¸ä¼šç«‹å³è¿›è¡Œ DOM æ›´æ–°ï¼Œè€Œæ˜¯åœ¨ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªçŽ¯ä¸­æ‰ä¼šè¿›è¡Œã€‚

è¿™ä¸ªå¼‚æ­¥æ›´æ–°æœºåˆ¶çš„è®¾è®¡æ˜¯ä¸ºäº†ä¼˜åŒ–æ€§èƒ½ã€‚Vue ä¼šå¯¹è¿›è¡Œå¤šæ¬¡æ•°æ®å˜åŒ–è¿›è¡Œåˆå¹¶ï¼Œç„¶åŽåœ¨ä¸‹ä¸€ä¸ªäº‹ä»¶å¾ªçŽ¯ä¸­è¿›è¡Œä¸€æ¬¡æ€§çš„ DOM æ›´æ–°ï¼Œä»Žè€Œå‡å°‘ä¸å¿…è¦çš„ DOM æ“ä½œï¼Œæé«˜æ€§èƒ½ã€‚

ç„¶è€Œï¼Œç”±äºŽå¼‚æ­¥æ›´æ–°çš„æœºåˆ¶ï¼Œæœ‰æ—¶å€™å¯èƒ½åœ¨ä¿®æ”¹æ•°æ®åŽéœ€è¦ç«‹å³æ‰§è¡Œä¸€äº› DOM æ“ä½œï¼Œä¾‹å¦‚èŽ·å–åˆ°æ›´æ–°åŽçš„ DOM å…ƒç´ ã€æ›´æ–°åŽçš„æ ·å¼è®¡ç®—ã€è§¦å‘ä¸€äº›ç‰¹å®šäº‹ä»¶ç­‰ã€‚è¿™æ—¶å€™å°±éœ€è¦ä½¿ç”¨ nextTick æ–¹æ³•äº†ã€‚

nextTick æ–¹æ³•æ˜¯ Vue æä¾›çš„ä¸€ä¸ªå®žç”¨å·¥å…·ï¼Œå®ƒèƒ½å¤Ÿå°†å›žè°ƒå‡½æ•°å»¶è¿Ÿåˆ°ä¸‹ä¸€ä¸ª DOM æ›´æ–°å¾ªçŽ¯ä¹‹åŽæ‰§è¡Œ**ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé€šè¿‡ nextTick æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®ä¿åœ¨ DOM æ›´æ–°å®ŒæˆåŽæ‰§è¡ŒæŸäº›æ“ä½œã€‚**

ä½¿ç”¨ nextTick æ–¹æ³•ç»å¸¸ç”¨æ¥è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š

èŽ·å–æ›´æ–°åŽçš„ DOM å…ƒç´ 

æ›´æ–°åŽçš„æ ·å¼è®¡ç®—

è§¦å‘ä¸€äº›ç‰¹å®šäº‹ä»¶

ç»¼ä¸Šæ‰€è¿°ï¼ŒnextTick çš„å‡ºçŽ°è§£å†³äº† Vue çš„å¼‚æ­¥æ›´æ–°æœºåˆ¶å¯¼è‡´çš„ DOM æ›´æ–°åŽçš„æ“ä½œé—®é¢˜ï¼Œä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨æ­£ç¡®çš„æ—¶æœºæ‰§è¡Œå¯¹åº”çš„æ“ä½œï¼Œæé«˜å¼€å‘æ•ˆçŽ‡å’Œçµæ´»æ€§ã€‚
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”

åŽŸæ–‡é“¾æŽ¥ï¼šhttps://blog.csdn.net/sunyctf/article/details/145663221



â€Œ**[window.scrollTo](https://www.baidu.com/s?rsv_dl=re_dqa_generate&sa=re_dqa_generate&wd=window.scrollTo&rsv_pq=daca00b1006c2e06&oq=window.scrollTo&rsv_t=e8f4R24qilwD4EktIXeCp67IPV7unL3rI7sG6TAqSXVqFGXJhIEBupphQ4o&tn=baidu&ie=utf-8)**â€Œ æ–¹æ³•ç”¨äºŽå°†æµè§ˆå™¨çª—å£æ»šåŠ¨åˆ°æŒ‡å®šçš„åæ ‡ä½ç½®ã€‚è¯¥æ–¹æ³•æœ‰ä¸¤ç§è°ƒç”¨æ–¹å¼ï¼š

1. â€Œ**ç›´æŽ¥æŒ‡å®šåæ ‡**â€Œï¼šä½¿ç”¨ `window.scrollTo(xpos, ypos)`ï¼Œå…¶ä¸­ `xpos` å’Œ `ypos` åˆ†åˆ«è¡¨ç¤ºçª—å£æ–‡æ¡£æ˜¾ç¤ºåŒºå·¦ä¸Šè§’çš„ x å’Œ y åæ ‡â€Œ1ã€‚ä¾‹å¦‚ï¼Œ`window.scrollTo(0, 0)` ä¼šå°†é¡µé¢æ»šåŠ¨åˆ°é¡¶éƒ¨ã€‚
2. â€Œ**ä½¿ç”¨é€‰é¡¹å¯¹è±¡**â€Œï¼šä½¿ç”¨ `window.scrollTo({left: xpos, top: ypos, behavior})`ï¼Œå…¶ä¸­ `left` å’Œ `top` åˆ†åˆ«è¡¨ç¤º x å’Œ y åæ ‡ï¼Œ`behavior` å¯ä»¥è®¾ç½®ä¸º `smooth`ï¼ˆå¹³æ»‘æ»šåŠ¨ï¼‰æˆ– `instant`ï¼ˆçž¬é—´æ»šåŠ¨ï¼‰ï¼Œé»˜è®¤å€¼ä¸º `auto`â€Œ23ã€‚ä¾‹å¦‚ï¼Œ`window.scrollTo({left: 0, top: 100, behavior: "smooth"})` ä¼šå¹³æ»‘æ»šåŠ¨åˆ°é¡µé¢é¡¶éƒ¨100åƒç´ çš„ä½ç½®ã€‚

### å¹³æ»‘æ»šåŠ¨åˆ°é¡µé¢é¡¶éƒ¨

å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å®žçŽ°å¹³æ»‘æ»šåŠ¨åˆ°é¡µé¢é¡¶éƒ¨ï¼š

```
javascriptCopy Codefunction scrollToTop() {
  const c = document.documentElement.scrollTop || document.body.scrollTop;
  if (c > 0) {
    window.requestAnimationFrame(scrollToTop);
    window.scrollTo(0, c - c / 8);
  }
}
scrollToTop();
```